<!-- third party scripts -->
<script src="https://unpkg.com/@popperjs/core@2" defer></script>
<script src="https://unpkg.com/tippy.js@6" defer></script>
<script src="https://unpkg.com/mark.js@8" defer></script>

<!-- include all js in scripts folder -->
{% assign scripts = site.static_files | where_exp: "file", "file.path contains '/_scripts'" %}
{% for script in scripts %}
  <script src="{{ script.path | relative_url }}"></script>
{% endfor %}

<script>
// ===========================
// Publications – highlight carousel
// ===========================
document.addEventListener("DOMContentLoaded", function () {
  const carousel = document.querySelector(".pub-carousel");
  if (!carousel) return;

  const track = carousel.querySelector(".pub-carousel-track");
  const slides = Array.from(track.children);
  const prevBtn = carousel.querySelector(".pub-carousel-prev");
  const nextBtn = carousel.querySelector(".pub-carousel-next");

  if (!slides.length) return;

  let index = 0;

  function updateCarousel() {
    // 每張卡片寬度是 100%，直接位移整個 track
    track.style.transform = "translateX(" + (-index * 100) + "%)";
  }

  prevBtn.addEventListener("click", function () {
    index = (index - 1 + slides.length) % slides.length;
    updateCarousel();
  });

  nextBtn.addEventListener("click", function () {
    index = (index + 1) % slides.length;
    updateCarousel();
  });

  updateCarousel();
});

